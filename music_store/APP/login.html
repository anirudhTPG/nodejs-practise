<!DOCTYPE html>
<html lang="en">
   <head>
      <!-- basic -->
      <meta charset="utf-8">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <!-- mobile metas -->
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta name="viewport" content="initial-scale=1, maximum-scale=1">
      <!-- site metas -->
      <title>sungla</title>
      <meta name="keywords" content="">
      <meta name="description" content="">
      <meta name="author" content="">
      <!-- bootstrap css -->
      <link rel="stylesheet" href="css/bootstrap.min.css">
      <!-- style css -->
      <link rel="stylesheet" href="css/style.css">
      <!-- Responsive-->
      <link rel="stylesheet" href="css/responsive.css">
      <!-- fevicon -->
      <link rel="icon" href="images/fevicon.png" type="image/gif" />
      <!-- Scrollbar Custom CSS -->
      <link rel="stylesheet" href="css/jquery.mCustomScrollbar.min.css">
   </head>
   <!-- body -->
   <body class="main-layout">
      <!-- loader  -->
      <div class="loader_bg">
         <div class="loader"><img src="images/loading.gif" alt="#" /></div>
      </div>
      <!-- end loader -->
      <!-- header -->
      <header>
         <!-- header inner -->
         <div class="header">
            <div class="container-fluid">
               <div class="row">
                  <div class="col-xl-3 col-lg-3 col-md-3 col-sm-3 col logo_section">
                     <div class="full">
                        <div class="center-desk">
                           <div class="logo">
                              <a href="index.html"><img src="images/logo.png" alt="#" /></a>
                           </div>
                        </div>
                     </div>
                  </div>
                  <div class="col-xl-9 col-lg-9 col-md-9 col-sm-9">
                     <nav class="navigation navbar navbar-expand-md navbar-dark ">
                        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarsExample04" aria-controls="navbarsExample04" aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                        </button>
                        <div class="collapse navbar-collapse" id="navbarsExample04">
                           <ul class="navbar-nav mr-auto">
                              <li class="nav-item active">
                                 <a class="nav-link" href="index.html">Home</a>
                              </li>
                              <li class="nav-item">
                                 <a class="nav-link" href="glasses.html">Products</a>
                              </li>
                              <li class="nav-item">
                                 <a class="nav-link" href="shop.html">Shopping Cart</a>
                              </li>
                              <li class="nav-item d_none login_btn">
                                 <a class="nav-link" href="#">Login</a>
                              </li>
                              <li class="nav-item d_none sea_icon">
                                 <a class="nav-link" href="#"><i class="fa fa-shopping-bag" aria-hidden="true"></i><i class="fa fa-search" aria-hidden="true"></i></a>
                              </li>
                           </ul>
                        </div>
                     </nav>
                  </div>
               </div>
            </div>
         </div>
      </header>
      <!-- end header inner -->
      <!-- end header -->
      <!-- banner -->
      <section class="banner_main">
         <main class="form-signin w-100 m-auto">
            <div class="container">

               <div id="div_login">
                   <h1>Login</h1>
                   <div id="message"></div>
                   <div>
                       <input type="text" class="textbox" id="txt_uname" name="txt_uname" placeholder="Username" />
                   </div>
                   <div>
                       <input type="password" class="textbox" id="txt_pwd" name="txt_pwd" placeholder="Password"/>
                   </div>
                   <div>
                       <input type="button" value="Submit" name="btn_Submit" id="btn_Submit" />
                   </div>
               </div>
           
           </div>

            <!-- <form>
              <h1 class="h3 mb-3 fw-normal">Please sign in</h1>
          
              <div class="form-floating">
                <input type="email" class="form-control" id="floatingInput" placeholder="user name">
                <label for="floatingInput">User Name</label>
              </div>
              <div class="form-floating">
                <input type="password" class="form-control" id="floatingPassword" placeholder="Password">
                <label for="floatingPassword">Password</label>
              </div>
          
              <div class="checkbox mb-3">
                <label>
                  <input type="checkbox" value="remember-me"> Remember me
                </label>
              </div>
              <button class="w-100 btn btn-lg btn-primary" type="submit" value="signin">Sign in</button>
            </form> -->
          </main>
      </section>
      <!-- end banner -->
      <!--  footer -->
      <footer>
         <div class="footer">
            <div class="container">
               <div class="row">
                  <div class="col-md-8 offset-md-2">
                     <ul class="location_icon">
                        <li><a href="#"><i class="fa fa-map-marker" aria-hidden="true"></i></a><br> Location</li>
                        <li><a href="#"><i class="fa fa-phone" aria-hidden="true"></i></a><br> +01 1234567890</li>
                        <li><a href="#"><i class="fa fa-envelope" aria-hidden="true"></i></a><br> demo@gmail.com</li>
                     </ul>
                  </div>
               </div>
            </div>
            <div class="copyright">
               <div class="container">
                  <div class="row">
                     <div class="col-md-12">
                        <p>Â© 2019 All Rights Reserved. Design by<a href="https://html.design/"> Free Html Templates</a></p>
                     </div>
                  </div>
               </div>
            </div>
         </div>
      </footer>
      <!-- end footer -->
      <!-- Javascript files-->
      <script src="js/jquery.min.js"></script>
      <script src="js/bootstrap.bundle.min.js"></script>
      <script src="js/jquery-3.0.0.min.js"></script>
      <!-- <script src="js/jquery.cookies.js"></script> -->
      <script src="https://cdn.jsdelivr.net/npm/js-cookie@3.0.1/dist/js.cookie.min.js"></script>
      
      <!-- sidebar -->
      <script src="js/jquery.mCustomScrollbar.concat.min.js"></script>
      <script src="js/custom.js"></script> 
      <script type="text/javascript">
         console.log('************** script tag ***************');
         $(document).ready(function(){
            console.log('************** hi 160 ***************');
            $("#btn_Submit").click(function(){
               console.log('************** hi 161 ***************');
                var username = $("#txt_uname").val().trim();
                var password = $("#txt_pwd").val().trim();
        
                if( username != "" && password != "" ){
                    $.ajax({
                        url:'http://localhost:9090/user/login',
                        type:'post',
                        data:{username:username,password:password},
                        success:function(response, xhr){
                                console.log('ajax response:', response); 
                                console.log('ajax xhr:', xhr); 
                            var msg = "";
                            if(xhr == 'success'){
                                //window.location = "home.php";
                                console.log('ajax success'); 
                                var role = response.role;
                                var token = response.token;
                                var username = response.username;
                                Cookies.set('node_role', response.role);
                                Cookies.set('node_token', response.token);
                                Cookies.set('node_username', response.username);
                                if(response.role == 'administrator'){
                                 window.location.href = "products.html";
                                }else{
                                 window.location.href = "userproducts.html";
                                }
                                
                            }else{
                                 console.log("Invalid username and password!");  
                                 msg = "Invalid username and password!";
                            }
                        },
                        error: function(jqXHR){
                           console.log('error: Invalid username and password!'); 
                        }
                    });
                }
            });
        });
      </script>
   </body>
</html>

